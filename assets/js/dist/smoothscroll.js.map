{"version":3,"sources":["../src/smoothscroll.js"],"names":["polyfill","w","window","d","document","documentElement","style","__forceSmoothScrollPolyfill__","Element","HTMLElement","SCROLL_TIME","original","scroll","scrollTo","scrollBy","elementScroll","prototype","scrollElement","scrollIntoView","now","performance","bind","Date","isMicrosoftBrowser","userAgent","userAgentPatterns","RegExp","join","test","ROUNDING_TOLERANCE","navigator","x","y","scrollLeft","scrollTop","ease","k","Math","cos","PI","shouldBailOut","firstArg","behavior","undefined","TypeError","hasScrollableSpace","el","axis","clientHeight","scrollHeight","clientWidth","scrollWidth","canOverflow","overflowValue","getComputedStyle","isScrollable","isScrollableY","isScrollableX","findScrollableParent","isBody","parentNode","body","step","context","time","value","currentX","currentY","elapsed","startTime","startX","startY","method","call","scrollable","requestAnimationFrame","smoothScroll","scrollX","pageXOffset","scrollY","pageYOffset","arguments","left","top","exports","module"],"mappings":"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","file":"smoothscroll.js","sourcesContent":["/*\n\nThe MIT License (MIT)\n\nCopyright (c) 2013 Dustan Kasten\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\nthe Software, and to permit persons to whom the Software is furnished to do so,\nsubject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\nFOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\nCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\nIN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n */\n'use strict';\n\n// polyfill\nfunction polyfill() {\n  // aliases\n  var w = window;\n  var d = document;\n\n  // return if scroll behavior is supported and polyfill is not forced\n  if (\n    'scrollBehavior' in d.documentElement.style &&\n    w.__forceSmoothScrollPolyfill__ !== true\n  ) {\n    return;\n  }\n\n  // globals\n  var Element = w.HTMLElement || w.Element;\n  var SCROLL_TIME = 468;\n\n  // object gathering original scroll methods\n  var original = {\n    scroll: w.scroll || w.scrollTo,\n    scrollBy: w.scrollBy,\n    elementScroll: Element.prototype.scroll || scrollElement,\n    scrollIntoView: Element.prototype.scrollIntoView\n  };\n\n  // define timing method\n  var now =\n    w.performance && w.performance.now\n      ? w.performance.now.bind(w.performance)\n      : Date.now;\n\n  /**\n   * indicates if a the current browser is made by Microsoft\n   * @method isMicrosoftBrowser\n   * @param {String} userAgent\n   * @returns {Boolean}\n   */\n  function isMicrosoftBrowser(userAgent) {\n    var userAgentPatterns = ['MSIE ', 'Trident/', 'Edge/'];\n\n    return new RegExp(userAgentPatterns.join('|')).test(userAgent);\n  }\n\n  /*\n   * IE has rounding bug rounding down clientHeight and clientWidth and\n   * rounding up scrollHeight and scrollWidth causing false positives\n   * on hasScrollableSpace\n   */\n  var ROUNDING_TOLERANCE = isMicrosoftBrowser(w.navigator.userAgent) ? 1 : 0;\n\n  /**\n   * changes scroll position inside an element\n   * @method scrollElement\n   * @param {Number} x\n   * @param {Number} y\n   * @returns {undefined}\n   */\n  function scrollElement(x, y) {\n    this.scrollLeft = x;\n    this.scrollTop = y;\n  }\n\n  /**\n   * returns result of applying ease math function to a number\n   * @method ease\n   * @param {Number} k\n   * @returns {Number}\n   */\n  function ease(k) {\n    return 0.5 * (1 - Math.cos(Math.PI * k));\n  }\n\n  /**\n   * indicates if a smooth behavior should be applied\n   * @method shouldBailOut\n   * @param {Number|Object} firstArg\n   * @returns {Boolean}\n   */\n  function shouldBailOut(firstArg) {\n    if (\n      firstArg === null ||\n      typeof firstArg !== 'object' ||\n      firstArg.behavior === undefined ||\n      firstArg.behavior === 'auto' ||\n      firstArg.behavior === 'instant'\n    ) {\n      // first argument is not an object/null\n      // or behavior is auto, instant or undefined\n      return true;\n    }\n\n    if (typeof firstArg === 'object' && firstArg.behavior === 'smooth') {\n      // first argument is an object and behavior is smooth\n      return false;\n    }\n\n    // throw error when behavior is not supported\n    throw new TypeError(\n      'behavior member of ScrollOptions ' +\n        firstArg.behavior +\n        ' is not a valid value for enumeration ScrollBehavior.'\n    );\n  }\n\n  /**\n   * indicates if an element has scrollable space in the provided axis\n   * @method hasScrollableSpace\n   * @param {Node} el\n   * @param {String} axis\n   * @returns {Boolean}\n   */\n  function hasScrollableSpace(el, axis) {\n    if (axis === 'Y') {\n      return el.clientHeight + ROUNDING_TOLERANCE < el.scrollHeight;\n    }\n\n    if (axis === 'X') {\n      return el.clientWidth + ROUNDING_TOLERANCE < el.scrollWidth;\n    }\n  }\n\n  /**\n   * indicates if an element has a scrollable overflow property in the axis\n   * @method canOverflow\n   * @param {Node} el\n   * @param {String} axis\n   * @returns {Boolean}\n   */\n  function canOverflow(el, axis) {\n    var overflowValue = w.getComputedStyle(el, null)['overflow' + axis];\n\n    return overflowValue === 'auto' || overflowValue === 'scroll';\n  }\n\n  /**\n   * indicates if an element can be scrolled in either axis\n   * @method isScrollable\n   * @param {Node} el\n   * @param {String} axis\n   * @returns {Boolean}\n   */\n  function isScrollable(el) {\n    var isScrollableY = hasScrollableSpace(el, 'Y') && canOverflow(el, 'Y');\n    var isScrollableX = hasScrollableSpace(el, 'X') && canOverflow(el, 'X');\n\n    return isScrollableY || isScrollableX;\n  }\n\n  /**\n   * finds scrollable parent of an element\n   * @method findScrollableParent\n   * @param {Node} el\n   * @returns {Node} el\n   */\n  function findScrollableParent(el) {\n    var isBody;\n\n    do {\n      el = el.parentNode;\n\n      isBody = el === d.body;\n    } while (isBody === false && isScrollable(el) === false);\n\n    isBody = null;\n\n    return el;\n  }\n\n  /**\n   * self invoked function that, given a context, steps through scrolling\n   * @method step\n   * @param {Object} context\n   * @returns {undefined}\n   */\n  function step(context) {\n    var time = now();\n    var value;\n    var currentX;\n    var currentY;\n    var elapsed = (time - context.startTime) / SCROLL_TIME;\n\n    // avoid elapsed times higher than one\n    elapsed = elapsed > 1 ? 1 : elapsed;\n\n    // apply easing to elapsed time\n    value = ease(elapsed);\n\n    currentX = context.startX + (context.x - context.startX) * value;\n    currentY = context.startY + (context.y - context.startY) * value;\n\n    context.method.call(context.scrollable, currentX, currentY);\n\n    // scroll more if we have not reached our destination\n    if (currentX !== context.x || currentY !== context.y) {\n      w.requestAnimationFrame(step.bind(w, context));\n    }\n  }\n\n  /**\n   * scrolls window or element with a smooth behavior\n   * @method smoothScroll\n   * @param {Object|Node} el\n   * @param {Number} x\n   * @param {Number} y\n   * @returns {undefined}\n   */\n  function smoothScroll(el, x, y) {\n    var scrollable;\n    var startX;\n    var startY;\n    var method;\n    var startTime = now();\n\n    // define scroll context\n    if (el === d.body) {\n      scrollable = w;\n      startX = w.scrollX || w.pageXOffset;\n      startY = w.scrollY || w.pageYOffset;\n      method = original.scroll;\n    } else {\n      scrollable = el;\n      startX = el.scrollLeft;\n      startY = el.scrollTop;\n      method = scrollElement;\n    }\n\n    // scroll looping over a frame\n    step({\n      scrollable: scrollable,\n      method: method,\n      startTime: startTime,\n      startX: startX,\n      startY: startY,\n      x: x,\n      y: y\n    });\n  }\n\n  // ORIGINAL METHODS OVERRIDES\n  // w.scroll and w.scrollTo\n  w.scroll = w.scrollTo = function() {\n    // avoid action when no arguments are passed\n    if (arguments[0] === undefined) {\n      return;\n    }\n\n    // avoid smooth behavior if not required\n    if (shouldBailOut(arguments[0]) === true) {\n      original.scroll.call(\n        w,\n        arguments[0].left !== undefined\n          ? arguments[0].left\n          : typeof arguments[0] !== 'object'\n            ? arguments[0]\n            : w.scrollX || w.pageXOffset,\n        // use top prop, second argument if present or fallback to scrollY\n        arguments[0].top !== undefined\n          ? arguments[0].top\n          : arguments[1] !== undefined\n            ? arguments[1]\n            : w.scrollY || w.pageYOffset\n      );\n\n      return;\n    }\n\n    // LET THE SMOOTHNESS BEGIN!\n    smoothScroll.call(\n      w,\n      d.body,\n      arguments[0].left !== undefined\n        ? ~~arguments[0].left\n        : w.scrollX || w.pageXOffset,\n      arguments[0].top !== undefined\n        ? ~~arguments[0].top\n        : w.scrollY || w.pageYOffset\n    );\n  };\n\n}\n\nif (typeof exports === 'object' && typeof module !== 'undefined') {\n  // commonjs\n  module.exports = { polyfill: polyfill };\n} else {\n  // global\n  polyfill();\n}\n"]}